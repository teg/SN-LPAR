% Preempt some bad decisions by LLNCS
\RequirePackage{fixllncs}


\documentclass[orivec]{llncs}


% To get cases in equations
\usepackage{amsmath}

% To use definitions, lemmas and theorems.
%\usepackage{amsthm}

% twoheadleftarrow
\usepackage{amssymb}

% Nicer array and tabular layout (IEEE-suggested)
\usepackage{array}

% A more pleasant font
\usepackage[T1]{fontenc} % use postscript type 1 fonts
\usepackage{textcomp} % use symbols in TS1 encoding
%\usepackage[garamond]{mathdesign} % use a nice font

% A taste of french
%\usepackage[french]{babel}
\usepackage[utf8]{inputenc}

% Allow inclusion of graphics
%\usepackage[pdftex]{graphicx}

% To get url's
%\usepackage[hidelinks]{hyperref}

% Improves the text layout
\usepackage{microtype}

% To typeset derivations
\usepackage[lutzsyntax,pdftex]{virginialake}

% For in-line lists
\usepackage{paralist}

% Landscape-orientated floats
\usepackage{rotating}

% To get semantic brackets
\usepackage{stmaryrd}

% Don't remember what this does
\usepackage[normalem]{ulem}

% Nice fractions
\usepackage{units}

% For commands with multiple optional arguments
\usepackage{xargs}

% Our own stuff
\usepackage{ALmacros}
%\usepackage{includeFigure}
%\input{ALpictures}
\usepackage{willemtools}

% Get counters and fonts right for theorem environments
\spnewtheorem{ALtheorem}{Theorem}{\bfseries}{\itshape}
\spnewtheorem{ALdefinition}[ALtheorem]{Definition}{\bfseries}{\upshape}
\spnewtheorem{ALproposition}[ALtheorem]{Proposition}{\bfseries}{\itshape}
\spnewtheorem{ALlemma}[ALtheorem]{Lemma}{\bfseries}{\itshape}


\newif\ifnonotes\nonotesfalse
\newcommand{\EMPTY}[1]{\ifnonotes\else{\color{red}    \noindent #1}\fi}
\newcommand{\Comment}[1]{\ifnonotes\else{\color{red}    \noindent{\bf Comment: }#1}\fi}
\newcommand{\Remark}[1]{\ifnonotes\else{\color{red}    \noindent{\bf Remark: }#1}\fi}
\newcommand{\TODO}[1]{\ifnonotes\else{\color{red}    \noindent{\bf TODO }#1}\fi}
%\newcommand{\Rem}[1]{\ifnonotes\else{\color{red}    \bigskip\\{\bf Remark: }#1 \bigskip\\}\fi}
%\nonotestrue % If this is commented, notes appear in the paper (if any)
%---------------------------------------------------------- REMOVE WHEN FINISHED


\makeatletter
\newcommand\typn{\@ifstar\typnstar\typnnostar}
\makeatother
\newcommandx\typnnostar[4][1=n,2=i]{(#3_{#2}:#4_{#2})_{#2\leq #1}}



\begin{document}

\begin{ALproposition}
\label{prop:normal form}
If a term or $n$-term $t$ is normal, it is of one of the following forms, where $u$ and each $u_i$ are normal.
\[
	x \qquad \lambda x.u \qquad u\share xy \qquad (\dotso(x)u_1\dotso )u_n \qquad \tup u
\]
\end{ALproposition}

\begin{ALproposition}
\label{prop:intersection weakening}
If $\Gamma, x:A\vdash t:B$ then $\Gamma,x:A\cap C\vdash t:B$.
\end{ALproposition}


\begin{ALproposition}
For an atomic lambda-term $t$ in normal form there exist $\Gamma$, $A$ such that $\Gamma\vdash_{D_a} t:A$.
\end{ALproposition}

\begin{proof}
The proof proceeds by induction on $t$, following Proposition~\ref{prop:normal form}.
%
\begin{enumerate}[1)]

	\item
Let $t=x$. Then $x:A\vdash x:A$ for any $A$.

	\item
Let $t=\lambda x.u$ with $u$ normal.
%
By the induction hypothesis there are $\Gamma$, $A$, and $B$ such that $\Gamma, x:A\vdash u:B$.
%
Then $\Gamma\vdash\lambda x.u:A\vlim B$.

	\item
let $t=u\share xy$ with $u$ normal.
%
By the induction hypothesis there are $\Gamma$, $A$, and $B_i$ for $i\leq n$ such that $\Gamma,(x_i:B_i)_{i\leq n}\vdash u:A$.
%
Let $B=\bigcap_{i\leq n}B_i$.
%
By Proposition~\ref{prop:intersection weakening} $\Gamma,(x_i:B)_{i\leq n}\vdash u:A$, and by the inference rule $(\typeshare)$, for sharing, $\Gamma\vdash u\share xy:A$.

	\item
Let $t=(\dotso(x)u_1\dotso )u_n$ with each $u_i$ normal.
%
By the induction hypothesis there are $\Gamma_i$ and $A_i$ for each $i\leq n$ such that $\Gamma_i \vdash u_i: A_i$.
%
For any $B$, the variable $x$ is typed by $x: A_1 \vlim \dotso \vlim A_n \vlim B \vdash x: A_1 \vlim \dotso \vlim A_n \vlim B$.
%
Then $(\Gamma_i)_{i\leq n},x: A_1 \vlim \dotso \vlim A_n \vlim B \vdash (\dotso(x)u_1\dotso )u_n: B$.

	\item
Let $t=\tup u$ with each $u_i$ normal.
%
By the induction hypothesis, there are $\Gamma_i$ and $A_i$ for each $i\leq n$ such that  $\Gamma_i \vdash u_i: A_i$.
%
By the inference rule $\typetuple_n$, for tuples, $(\Gamma_i)_{i\leq n}\vdash \tup u:A_1\vlan\dotso\vlan A_n$.

\end{enumerate}
\end{proof}


\noindent
\rule{\textwidth}{1pt}


\[
	\vliiinf{}{}
	  {u^*\distr xy{t^n}:A^*}
	  {(x_i:\bigcap_{j\leq m}(B_j\vlim C_j))_{i\leq n} \vdash u^*:A^*}
	  {}
	  {\big(y:B_j\vdash t^n : C_j\big)_{j\leq m}}
\]

\[
	\vliiinf{}{}
	  {u^*\distr xy{t^n}:A^*}
	  {(x_i:\bigcap_{j\leq m}(B_j\vlim C_j))_{i\leq n} \vdash u^*:A^*}
	  {}
	  {y:B_1\vdash t^n : C_1~\dotso~y:B_m\vdash t^n : C_m}
\]

\[
	\vliiinf{}{}
	  {u^*\distr xy{t^n}:A^*}
	  {(x_i:(B_1\vlim C_1)\cap\dotso\cap(B_m\vlim C_m))_{i\leq n} \vdash u^*:A^*}
	  {}
	  {\big(y:B_j\vdash t^n : C_j\big)_{j\leq m}}
\]

\noindent
\rule{\textwidth}{1pt}

\end{document}




